{% extends "admin/base_site.html" %}
{% load static %}

{% block extrastyle %}{{ block.super }}<link rel="stylesheet" type="text/css" href="{% static "admin/css/forms.css" %}" />{% endblock %}

{% block coltype %}colMS{% endblock %}

{% block content %}
<div id="content-main">
	<div class="module">
		{% for t, f in files.iteritems %}
			<!-- <form action="" method="post"> -->
			<!-- {% csrf_token %} -->
			<table style="width: 100%; margin-bottom: 20px;">
				<caption>{% if t == 'template' %}Templates{% else %}Stylesheets{% endif %}</caption>
				<!-- <thead>
					<tr>
					<th scope="col" class="sortable column-name">
						<div class="text"><a href="#">Name</a></div>
						<div class="clear"></div>
					</th>
					<th scope="col" class="sortable column-size">
						<div class="text"><a href="#">Size</a></div>
						<div class="clear"></div>
					</th>
					<th scope="col" class="sortable column-modified">
						<div class="text"><a href="#">Last Modified</a></div>
						<div class="clear"></div>
					</th>
					<th scope="col" class="column-used">
						<div class="text"><span>Uses</span></div>
						<div class="clear"></div>
					</th>
					</tr>
				</thead> -->
				{% for s in f %}
				<tr class="{% cycle 'row1' 'row2' %}">
					<!-- <td class="action-checkbox" style="width: 1.5em;">
						<input class="action-select" name="delete_{{ t }}" value="{{ s.name }}" type="checkbox">
					</td> -->
					<th><a href="{% url 'file_edit' file_type=t file_name=s.name %}">{{ s.name }}</a></th>
					<td>{{ s.size | filesizeformat }}</td>
					<td>{{ s.mtime | date }}</td>
					{% if 'page_count' in s %}
					<td>
						{% if s.page_count %}
						<a href="{% url 'admin:content_page_changelist' %}?template={{ s.name }}">{{ s.page_count }} {{ s.page_count|pluralize:'page, pages' }}</a>
						{% else %}
						0 pages
						{% endif %}
					</td>
					{% endif %}
					<!-- <td><a class="deletelink" href="#">Delete</a></td> -->
				</tr>
				{% endfor %}
			</table>
			<!-- <input type="submit" /> -->
			<!-- </form> -->
		{% endfor %}
	</div>
</div>
<div id="content-related">
	<div class="module">
		<h3 style="margin-top: 16px">Create new template</h3>
		<form action="" method="post" style="padding: 0 16px">
			{% csrf_token %}
			<input type="text" name="new_template" required="" pattern="^[-\w ]{1,32}$" style="width: 100%; box-sizing: border-box" />
			<div class="submit-row" style="border: none; padding: 0">
				<input type="submit" class="default" value="Create" />
			</div>
		</form>

		<h3>Create new stylesheet</h3>
		<form action="" method="post" style="padding: 0 16px">
			{% csrf_token %}
			<input type="text" name="new_css" required="" pattern="^[-\w ]{1,32}$" style="width: 100%; box-sizing: border-box" />
			<div class="submit-row" style="border: none; padding: 0">
				<input type="submit" class="default" value="Create" />
			</div>
		</form>
	</div>
</div>
{% endblock %}
